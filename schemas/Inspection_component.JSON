{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Inspection Module Data Model",
  "type": "object",
  "properties": {
    "HazardType": {
      "type": "array",
      "items": { "$ref": "#/definitions/HazardType" }
    },
    "InspectionHazard": {
      "type": "array",
      "items": { "$ref": "#/definitions/InspectionHazard" }
    },
    "HazardReport": {
      "type": "array",
      "items": { "$ref": "#/definitions/HazardReport" }
    },
    "Inspection": {
      "type": "array",
      "items": { "$ref": "#/definitions/Inspection" }
    },
    "Notification": {
      "type": "array",
      "items": { "$ref": "#/definitions/Notification" }
    },
    "Escalation": {
      "type": "array",
      "items": { "$ref": "#/definitions/Escalation" }
    },
    "HealthRiskRating": {
      "type": "array",
      "items": { "$ref": "#/definitions/HealthRiskRating" }
    },
    "Severity": {
      "type": "array",
      "items": { "$ref": "#/definitions/Severity" }
    },
    "InvestigationType": {
      "type": "array",
      "items": { "$ref": "#/definitions/InvestigationType" }
    },
    "ReportStatus": {
      "type": "array",
      "items": { "$ref": "#/definitions/ReportStatus" }
    },
    "TriggerSource": {
      "type": "array",
      "items": { "$ref": "#/definitions/TriggerSource" }
    },
    "EscalationStatus": {
      "type": "array",
      "items": { "$ref": "#/definitions/EscalationStatus" }
    },
    "NotificationType": {
      "type": "array",
      "items": { "$ref": "#/definitions/NotificationType" }
    },
    "NotificationMethod": {
      "type": "array",
      "items": { "$ref": "#/definitions/NotificationMethod" }
    },
    "EscalationStage": {
      "type": "array",
      "items": { "$ref": "#/definitions/EscalationStage" }
    },
    "EscalationType": {
      "type": "array",
      "items": { "$ref": "#/definitions/EscalationType" }
    }
  },
  "required": [
    "HazardTypes",
    "InspectionHazards",
    "HazardReports",
    "Inspections",
    "Notifications",
    "Escalations"
  ],
  "definitions": {
    "HazardType": {
      "type": "object",
      "description": "Stores types of hazards and their associated health risk ratings.",
      "properties": {
        "HazardTypeID": { "type": "integer" },
        "HazardType": { "type": "string" },
        "HealthRiskRatingID": { "type": "integer" },
        "Category": { "type": ["string", "null"] }
      },
      "required": ["HazardType", "HealthRiskRatingID"]
    },
    "InspectionHazard": {
      "type": "object",
      "description": "Links inspections with reported hazards including severity and notes.",
      "properties": {
        "InspectionHazardID": { "type": "integer" },
        "HazardTypeID": { "type": "integer" },
        "InspectionID": { "type": "integer" },
        "HazardReportID": { "type": "integer" },
        "SeverityID": { "type": "integer" },
        "Notes": { "type": ["string", "null"] }
      },
      "required": ["HazardTypeID", "InspectionID", "HazardReportID", "SeverityID"]
    },
    "HazardReport": {
      "type": "object",
      "description": "Captures reported hazards including details and status.",
      "properties": {
        "HazardReportID": { "type": "integer" },
        "PropertyID": { "type": "integer" },
        "TenantID": { "type": "integer" },
        "DateReported": { "type": "string", "format": "date" },
        "ReportedBy": { "type": "string" },
        "Description": { "type": ["string", "null"] },
        "PhotoEvidence": { "type": ["string", "null"] },
        "LocationDetails": { "type": ["string", "null"] },
        "InvestigationTypeID": { "type": "integer" },
        "InvestigationDueDate": { "type": "string", "format": "date" },
        "EmergencyActionTaken": { "type": "boolean" },
        "MadeSafeDate": { "type": ["string", "null"], "format": "date" },
        "FurtherWorkRequired": { "type": "boolean" },
        "FurtherWorkDueDate": { "type": ["string", "null"], "format": "date" },
        "ReportStatusID": { "type": "integer" }
      },
      "required": [
        "PropertyID", "TenantID", "DateReported", "ReportedBy",
        "InvestigationTypeID", "InvestigationDueDate", "EmergencyActionTaken",
        "FurtherWorkRequired", "ReportStatusID"
      ]
    },
    "Inspection": {
      "type": "object",
      "description": "Details inspections including schedule, status, and outcomes.",
      "properties": {
        "InspectionID": { "type": "integer" },
        "PropertyID": { "type": "integer" },
        "TenantID": { "type": "integer" },
        "TenancyID": { "type": "integer" },
        "TriggerSourceID": { "type": "integer" },
        "HazardReportedDate": { "type": "string", "format": "date" },
        "InspectionScheduledDate": { "type": ["string", "null"], "format": "date" },
        "InspectionCompletedDate": { "type": ["string", "null"], "format": "date" },
        "InspectorName": { "type": ["string", "null"] },
        "HazardConfirmed": { "type": "boolean" },
        "RepairRequired": { "type": "boolean" },
        "RepairScheduledDate": { "type": ["string", "null"], "format": "date" },
        "RepairCompletedDate": { "type": ["string", "null"], "format": "date" },
        "SLABreachFlag": { "type": "boolean" },
        "EscalationStatusID": { "type": "integer" },
        "NotificationSentToTenant": { "type": "boolean" },
        "InspectionNotes": { "type": ["string", "null"] }
      },
      "required": [
        "PropertyID", "TenantID", "TenancyID", "TriggerSourceID",
        "HazardReportedDate", "HazardConfirmed", "RepairRequired",
        "SLABreachFlag", "EscalationStatusID", "NotificationSentToTenant"
      ]
    },
    "Notification": {
      "type": "object",
      "description": "Records notifications sent to tenants about inspections or repairs.",
      "properties": {
        "NotificationID": { "type": "integer" },
        "InspectionID": { "type": "integer" },
        "TenantID": { "type": "integer" },
        "WorkOrderID": { "type": "integer" },
        "NotificationTypeID": { "type": "integer" },
        "DateSent": { "type": "string", "format": "date" },
        "NotificationMethodID": { "type": "integer" },
        "ContentSummary": { "type": ["string", "null"] }
      },
      "required": [
        "InspectionID", "TenantID", "WorkOrderID", "NotificationTypeID",
        "DateSent", "NotificationMethodID"
      ]
    },
    "Escalation": {
      "type": "object",
      "description": "Tracks escalations made during the inspection or repair process.",
      "properties": {
        "EscalationID": { "type": "integer" },
        "InspectionID": { "type": "integer" },
        "EscalationReason": { "type": ["string", "null"] },
        "EscalationStageID": { "type": "integer" },
        "EscalationTypeID": { "type": "integer" },
        "EscalatedTo": { "type": "string" },
        "EscalationStartDate": { "type": "string", "format": "date" },
        "EscalationEndDate": { "type": ["string", "null"], "format": "date" },
        "ActionTaken": { "type": ["string", "null"] },
        "CompensationOffered": { "type": "boolean" },
        "CompensationAmount": { "type": ["number", "null"] },
        "AlternativeAccommodationOffered": { "type": "boolean" },
        "AlternativeAccommodationDetails": { "type": ["string", "null"] },
        "TenantAcceptance": { "type": "boolean" },
        "EscalationNotes": { "type": ["string", "null"] }
      },
      "required": [
        "InspectionID", "EscalationStageID", "EscalationTypeID",
        "EscalatedTo", "EscalationStartDate", "CompensationOffered",
        "AlternativeAccommodationOffered", "TenantAcceptance"
      ]
    },

    "HealthRiskRating": {
      "type": "object",
      "description": "Defines levels of health risk (e.g., High, Medium, Low).",
      "properties": {
        "HealthRiskRatingID": { "type": "integer" },
        "HealthRiskRating": { "type": "string" }
      },
      "required": ["HealthRiskRating"]
    },
    "Severity": {
      "type": "object",
      "description": "Defines severity levels used in hazard reporting.",
      "properties": {
        "SeverityID": { "type": "integer" },
        "Severity": { "type": "string" }
      },
      "required": ["Severity"]
    },
    "InvestigationType": {
      "type": "object",
      "description": "Defines types of investigations conducted.",
      "properties": {
        "InvestigationTypeID": { "type": "integer" },
        "InvestigationType": { "type": "string" }
      },
      "required": ["InvestigationType"]
    },
    "ReportStatus": {
      "type": "object",
      "description": "Defines statuses for hazard reports.",
      "properties": {
        "ReportStatusID": { "type": "integer" },
        "ReportStatus": { "type": "string" }
      },
      "required": ["ReportStatus"]
    },
    "TriggerSource": {
      "type": "object",
      "description": "Defines what triggered an inspection.",
      "properties": {
        "TriggerSourceID": { "type": "integer" },
        "TriggerSource": { "type": "string" }
      },
      "required": ["TriggerSource"]
    },
    "EscalationStatus": {
      "type": "object",
      "description": "Defines the status of an escalation.",
      "properties": {
        "EscalationStatusID": { "type": "integer" },
        "EscalationStatus": { "type": "string" }
      },
      "required": ["EscalationStatus"]
    },
    "NotificationType": {
      "type": "object",
      "description": "Defines types of notifications sent.",
      "properties": {
        "NotificationTypeID": { "type": "integer" },
        "NotificationType": { "type": "string" }
      },
      "required": ["NotificationType"]
    },
    "NotificationMethod": {
      "type": "object",
      "description": "Defines methods of delivering notifications.",
      "properties": {
        "NotificationMethodID": { "type": "integer" },
        "NotificationMethod": { "type": "string" }
      },
      "required": ["NotificationMethod"]
    },
    "EscalationStage": {
      "type": "object",
      "description": "Defines stages of the escalation process.",
      "properties": {
        "EscalationStageID": { "type": "integer" },
        "EscalationStage": { "type": "string" }
      },
      "required": ["EscalationStage"]
    },
    "EscalationType": {
      "type": "object",
      "description": "Defines types of escalation actions taken.",
      "properties": {
        "EscalationTypeID": { "type": "integer" },
        "EscalationType": { "type": "string" }
      },
      "required": ["EscalationType"]
    }
  }
}
